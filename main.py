# –§–∞–π–ª: main.py
import schedule
import time
import asyncio
from src.engine import run_bot_cycle

def job():
    """–û–±–≥–æ—Ä—Ç–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó"""
    asyncio.run(run_bot_cycle())

print("ü§ñ –ë–æ—Ç PromoHunter –∑–∞–ø—É—â–µ–Ω–æ!")
print("‚è≥ –Ø –±—É–¥—É –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –±–æ–Ω—É—Å–∏ –∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏ (–¥–ª—è —Ç–µ—Å—Ç—É)...")
print("‚ùå –©–æ–± –∑—É–ø–∏–Ω–∏—Ç–∏ –º–µ–Ω–µ, –Ω–∞—Ç–∏—Å–Ω–∏ Ctrl + C")

# --- –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –†–û–ó–ö–õ–ê–î–£ ---

# –î–ª—è —Ç–µ—Å—Ç—É —Å—Ç–∞–≤–∏–º–æ –∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏:
schedule.every(20).minutes.do(job)

# –ê –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É –∂–∏—Ç—Ç—ñ –º–æ–∂–Ω–∞ —Å—Ç–∞–≤–∏—Ç–∏ —Ç–∞–∫:
# schedule.every().day.at("09:00").do(job)  # –ö–æ–∂–µ–Ω –¥–µ–Ω—å –æ 9 —Ä–∞–Ω–∫—É
# schedule.every(6).hours.do(job)           # –ö–æ–∂–Ω—ñ 6 –≥–æ–¥–∏–Ω

# --- –í–Ü–ß–ù–ò–ô –¶–ò–ö–õ ---
while True:
    schedule.run_pending()
    time.sleep(1)